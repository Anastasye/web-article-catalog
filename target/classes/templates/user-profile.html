<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${viewedUser.fullName}">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
    <div class="container">
        <header class="header">
            <h1>üìö –ö–∞—Ç–∞–ª–æ–≥ —Å—Ç–∞—Ç–µ–π</h1>
            <div class="auth-section">
                <span sec:authentication="name"></span>
                <a th:href="@{/logout}" class="btn btn-logout">–í—ã–π—Ç–∏</a>
            </div>
        </header>

        <nav class="main-nav">
            <a th:href="@{/}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            <a th:href="@{/articles}" class="nav-link">–í—Å–µ —Å—Ç–∞—Ç—å–∏</a>
            <a th:href="@{/articles/my}" class="nav-link">–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</a>
            <a th:href="@{/articles/add}" class="nav-link">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</a>
            <a th:href="@{/user/profile}" class="nav-link">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a th:href="@{/user/search}" class="nav-link">–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>
        </nav>

        <main>
            <section class="dashboard">
                <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>

                <div th:if="${errorMessage}" class="alert alert-error" th:text="${errorMessage}"></div>

                <div class="profile-section">
                    <div class="profile-header">
                        <div class="avatar-section">
                            <div class="avatar-placeholder" th:if="${viewedUser.avatarPath == null}">
                                <span th:text="${viewedUser.fullName.substring(0, 1)}">?</span>
                            </div>
                            <img th:if="${viewedUser.avatarPath != null}" th:src="@{${viewedUser.avatarPath}}"
                                alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
                        </div>

                        <div class="profile-info">
                            <h3 th:text="${viewedUser.fullName}">–§–ò–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                            <p><strong>–õ–æ–≥–∏–Ω:</strong> <span th:text="${viewedUser.username}"></span></p>
                            <p th:if="${viewedUser.email}"><strong>Email:</strong> <span
                                    th:text="${viewedUser.email}"></span></p>
                            <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong>
                                <span th:text="${formattedRegistrationDate}"></span>
                            </p>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç—å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                    <div class="user-articles">
                        <h3>–°—Ç–∞—Ç—å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>

                        <div th:if="${viewedUser.articles.empty}" class="no-articles">
                            <p>–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π.</p>
                        </div>

                        <div th:unless="${viewedUser.articles.empty}" class="articles-grid">
                            <div th:each="article : ${viewedUser.articles}" class="article-card">
                                <h4 th:text="${article.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏</h4>
                                <p class="authors"><strong>–ê–≤—Ç–æ—Ä—ã:</strong> <span th:text="${article.authors}"></span>
                                </p>
                                <p class="meta">
                                    <strong>–¢–µ–º–∞:</strong> <span th:text="${article.topic}">–¢–µ–º–∞</span> |
                                    <strong>–ì–æ–¥:</strong> <span th:text="${article.publicationYear}">–ì–æ–¥</span>
                                </p>
                                <p class="keywords" th:if="${article.keywords}">
                                    <strong>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> <span th:text="${article.keywords}"></span>
                                </p>
                                <div class="article-actions">
                                    <a th:href="@{'/articles/view/' + ${article.id}}"
                                        class="btn btn-sm btn-info">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                                    <!-- 2.4 –¢–æ–ª—å–∫–æ –±–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è PDF -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="back-link">
                        <a th:href="@{/user/search}">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>
                    </div>
                </div>
            </section>
        </main>

    </div>
</body>

</html>